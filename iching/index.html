<!DOCTYPE html>
<html lang="my">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link rel="stylesheet" href="css/bootstrap.min.css">
    <link rel="stylesheet" href="css/style.css">
    <link rel="stylesheet" href="css/fancybox.min.css">
    <link rel="stylesheet" href="css/flag-icon.css">
    <title>Malaysian Identity Number Numerology 马来西亚身份证易经数</title>
    <script src="https://code.jquery.com/jquery-3.6.0.min.js"></script>
</head>

<body>
    <div class="container">
        <!-- Language Selector Dropdown -->
        <div class="language-dropdown-container">
            <button class="language-dropdown-button">
                <span class="flag-icon flag-icon-mys"></span> Malaysia ID
            </button>
            <div class="language-dropdown-list">
                <a href="index.html" onclick="changeLanguage('my')"><span class="flag-icon flag-icon-mys"></span> Malaysia
                    ID</a>
                <a href="ichingCN.html" onclick="changeLanguage('zh')"><span class="flag-icon flag-icon-chn"></span> China
                    ID</a>
            </div>
        </div>
    </div>

    <div class="container">
        <h3 class="text-center">Malaysian Identity Number Numerology <br>马来西亚身份证易经数</h3>

        <form id="icForm">
            <div class="form-group">
                <label for="icNumber">Enter Malaysian Identity Number (880213045257):</label>
                <input type="text" id="icNumber" name="icNumber" class="form-control" pattern="\d{12}" required>
            </div>
            <button type="submit" class="btn btn-primary">Format</button>
            <div class="find-button">
                <button type="button" class="btn btn-click" id="findNumberBtn" data-fancybox
                    data-src="#lookupModal">Find No.</button>
            </div>
        </form>

        <div style="display: none;" id="lookupModal">
            <h2>Lookup Number</h2>
            <input type="text" id="lookupNumberInput" placeholder="Enter a number">
            <button type="button" class="btn btn-primary" id="lookupBtn">Lookup</button>
            <div id="lookupResult"></div>
        </div>

        <!-- Formatted IC Table -->
        <div class="table-responsive">
            <table id="formattedIC" class="table hidden">
                <thead>
                    <tr>
                        <th>Y</th>
                        <th class="separator">Y</th>
                        <th>M</th>
                        <th class="separator">M</th>
                        <th>D</th>
                        <th class="separator">D</th>
                        <th>R</th>
                        <th class="separator">R</th>
                        <th>N</th>
                        <th class="separator">N</th>
                        <th>N</th>
                        <th>N</th>
                    </tr>
                </thead>
                <tbody>
                    <tr id="formattedRow">
                        <!-- Data will be inserted here -->
                    </tr>
                </tbody>
            </table>
        </div>

        <!-- Take Note Table -->
        <div class="table-responsive pb-5">
            <table id="takeNoteTable" class="table hidden">
                <thead>
                    <tr>
                        <th>No.</th>
                        <th>Take Note 注意</th>
                    </tr>
                </thead>
                <tbody id="takeNoteRows">
                    <!-- Matched notes will be inserted here -->
                </tbody>
            </table>
        </div>

        <!-- Special Number Table -->
        <div class="table-responsive">
            <table id="specialNumberTable" class="table hidden">
                <thead>
                    <tr>
                        <th>Life Numbers 生命数字</th>
                    </tr>
                </thead>
                <tbody>
                    <tr id="specialNumberRow">
                        <!-- Special numbers will be inserted here -->
                    </tr>
                </tbody>
            </table>
        </div>

        <!-- Consecutive Number Table -->
        <div class="table-responsive">
            <table id="consecutiveNumberTable" class="table hidden">
                <thead>
                    <tr>
                        <th>Numbers</th>
                        <th>Analysis</th>
                    </tr>
                </thead>
                <tbody id="consecutiveNumberRows">
                    <!-- Consecutive number results will be inserted here -->
                </tbody>
            </table>
        </div>

        <!-- Age Table -->
        <div class="table-responsive">
            <table id="ageTable" class="table hidden">
                <thead>
                    <tr>
                        <th>Current Year 今年</th>
                        <th>Year of Birth 生日</th>
                        <th>Age 年龄</th>
                    </tr>
                </thead>
                <tbody>
                    <tr id="ageRow">
                        <!-- Age data will be inserted here -->
                    </tr>
                </tbody>
            </table>
        </div>

        <!-- Category Table -->
        <div class="table-responsive">
            <table id="categoryTable" class="table hidden">
                <thead>
                    <tr>
                        <th>Category</th>
                        <th>Value</th>
                    </tr>
                </thead>
                <tbody id="categoryRows">
                    <!-- Category values will be inserted here -->
                </tbody>
            </table>
            <table id="matchedResultsTable" class="table hidden">
                <thead>
                    <tr>
                        <th>No.</th>
                        <th>Analysis</th>
                    </tr>
                </thead>
                <tbody id="matchedResultsRows">
                    <!-- Matched results will be inserted here-->
                </tbody>
            </table>
        </div>

        <!-- New Category Table -->
        <div class="long-number">
        <div class="table-responsive">
            <table id="newCategoryTable" class="table hidden">
                <thead>
                    <tr>
                        <th>Category</th>
                        <th>Value</th>
                    </tr>
                </thead>
                <tbody id="newCategoryRows">
                    <!-- New category values will be inserted here -->
                </tbody>
            </table>
        </div>
    </div>
<!-- Age Range Filter Table -->
<h5 class="text-center">Age Range Analysis 年龄范围分析</h5>
<div class="table-responsive pb-5">
    <table id="ageRangeFilterTable" class="table hidden">
        <thead>
            <tr>
                <th>Age Range</th>
                <th>Numbers</th>
            </tr>
        </thead>
        <tbody id="ageRangeFilterRows">
            <!-- Filtered category values will be inserted here -->
        </tbody>
    </table>
</div>

        <!-- Lunar Converter -->
        <div class="convert-lunar">
            <h5 class="text-center">Lunar Analysis 农历分析</h5>
            <div class="table-responsive pb-5">
                <table id="lunarConverterTable" class="table hidden">
                    <thead>
                        <tr>
                            <th>Minus 负 11</th>
                            <th>Chinese Lunar Date 农历</th>
                        </tr>
                    </thead>
                    <tbody id="lunarConverterRows">
                        <!-- Lunar conversion results will be inserted here -->
                    </tbody>
                </table>
            </div>
        </div>


        <!-- Lunar Numbers -->
        <h5 class="text-center">Lunar Numbers 农历数字</h5>
        <div class="table-responsive pb-5">
            <table id="lunarNumbersTable" class="table hidden">
                <thead>
                    <tr>
                        <th>L1</th>
                        <th>L2</th>
                        <th>L3</th>
                        <th>L4</th>
                        <th>L5</th>
                        <th>L6</th>
                    </tr>
                </thead>
                <tbody id="lunarNumbersRows">
                    <!-- Lunar numbers will be inserted here -->
                </tbody>
            </table>
        </div>

        <!-- Lunar Age Range -->
        <h5 class="text-center">Lunar Age Range Analysis 农历年龄范围分析</h5>
        <div class="table-responsive pb-5">
            <table id="lunarAgeRangeTable" class="table hidden">
                <thead>
                    <tr>
                        <th>Age Range</th>
                        <th>Value</th>
                    </tr>
                </thead>
                <tbody id="lunarAgeRangeRows">
                    <!-- Lunar age range values will be inserted here -->
                </tbody>
            </table>
        </div>

    </div>

    <script src="https://cdnjs.cloudflare.com/ajax/libs/lunar-javascript/1.6.12/lunar.js"
        integrity="sha512-fS2RQklOT+Mgu5s5XdyhA0XZ1Uyyd75eMGTGX/RkadeeYoug7WYHOYiIvSGHeUx0+Bb35DwwqpNdIuZFohPv0A=="
        crossorigin="anonymous" referrerpolicy="no-referrer"></script>
    <script src="./js/iching.js"></script>
    <script src="./js/fancy-box-lookup.js"></script>
    <script src="./js/fancybox.min.js"></script>
    <script>
        document.getElementById('icForm').addEventListener('submit', function (event) {
    event.preventDefault();

    const icNumber = document.getElementById('icNumber').value;
    const datePart = icNumber.slice(0, 6);
    const rrPart = icNumber.slice(6, 8);
    const nnPart = icNumber.slice(8, 12);
    const yearPart = datePart.slice(0, 2);
    const monthPart = datePart.slice(2, 4);
    const dayPart = datePart.slice(4, 6);
    const currentYear = new Date().getFullYear();
    let birthYear = parseInt(yearPart);

    // Adjust year to 4 digits
    if (birthYear <= parseInt(currentYear.toString().slice(-2))) {
        birthYear += 2000;
    } else {
        birthYear += 1900;
    }

    // Check if the year is within the valid range
    if (birthYear < 1950 || birthYear > 2024) {
        alert("Year of birth must be between 1950 and 2024.");
        return;
    }

    const age = currentYear - birthYear;

    const formattedData = {
        Y1: datePart.charAt(0),
        Y2: datePart.charAt(1),
        M1: datePart.charAt(2),
        M2: datePart.charAt(3),
        D1: datePart.charAt(4),
        D2: datePart.charAt(5),
        R1: rrPart.charAt(0),
        R2: rrPart.charAt(1),
        N1: nnPart.charAt(0),
        N2: nnPart.charAt(1),
        N3: nnPart.charAt(2),
        N4: nnPart.charAt(3)
    };

    const formattedRow = document.getElementById('formattedRow');
    formattedRow.innerHTML = Object.entries(formattedData).map(([key, value]) => {
        const separatorClass = ['Y2', 'M2', 'D2', 'R2', 'N2'].includes(key) ? 'class="separator"' : '';
        return `<td ${separatorClass}>${value}</td>`;
    }).join('');

    const ageRow = document.getElementById('ageRow');
    ageRow.innerHTML = `
        <td>${currentYear}</td>
        <td>${birthYear}</td>
        <td>${age}</td>
    `;

    document.getElementById('formattedIC').classList.remove('hidden');
    document.getElementById('ageTable').classList.remove('hidden');

    // Calculate and display values for age categories
    const categoryRows = document.getElementById('categoryRows');
    categoryRows.innerHTML = ''; // Clear previous entries

    if (age >= 13 && age <= 22) {
        categoryRows.innerHTML += `<tr><td>Age 13-22</td><td>${formattedData.Y2},${formattedData.M1},${formattedData.M2}</td></tr>`;
    }
    if (age >= 23 && age <= 32) {
        categoryRows.innerHTML += `<tr><td>Age 23-32</td><td>${formattedData.M2},${formattedData.D1},${formattedData.D2}</td></tr>`;
    }
    if (age >= 33 && age <= 42) {
        categoryRows.innerHTML += `<tr><td>Age 33-42</td><td>${formattedData.D2},${formattedData.R1},${formattedData.R2}</td></tr>`;
    }
    if (age >= 43 && age <= 52) {
        categoryRows.innerHTML += `<tr><td>Age 43-52</td><td>${formattedData.R2},${formattedData.N1},${formattedData.N2}</td></tr>`;
    }
    if (age >= 53 && age <= 62) {
        categoryRows.innerHTML += `<tr><td>Age 53-62</td><td>${formattedData.N2},${formattedData.N3},${formattedData.N4}</td></tr>`;
    }
    if (age >= 63 && age <= 72) {
        categoryRows.innerHTML += `<tr><td>Age 63-72</td><td>${formattedData.N4},${formattedData.Y1},${formattedData.Y2}</td></tr>`;
    }

    document.getElementById('categoryTable').classList.remove('hidden');

    // Display category values in the new section
    const newCategoryRows = document.getElementById('newCategoryRows');
    newCategoryRows.innerHTML = ''; // Clear previous entries
    newCategoryRows.innerHTML += `<tr><td>Age 13-22</td><td>${formattedData.Y1},${formattedData.Y2},${formattedData.M1},${formattedData.M2}</td></tr>`;
    newCategoryRows.innerHTML += `<tr><td>Age 23-32</td><td>${formattedData.Y1},${formattedData.Y2},${formattedData.M1},${formattedData.M2},${formattedData.D1},${formattedData.D2}</td></tr>`;
    newCategoryRows.innerHTML += `<tr><td>Age 33-42</td><td>${formattedData.Y1},${formattedData.Y2},${formattedData.M1},${formattedData.M2},${formattedData.D1},${formattedData.D2},${formattedData.R1},${formattedData.R2}</td></tr>`;
    newCategoryRows.innerHTML += `<tr><td>Age 43-52</td><td>${formattedData.Y1},${formattedData.Y2},${formattedData.M1},${formattedData.M2},${formattedData.D1},${formattedData.D2},${formattedData.R1},${formattedData.R2},${formattedData.N1},${formattedData.N2}</td></tr>`;
    newCategoryRows.innerHTML += `<tr><td>Age 53-62</td><td>${formattedData.Y1},${formattedData.Y2},${formattedData.M1},${formattedData.M2},${formattedData.D1},${formattedData.D2},${formattedData.R1},${formattedData.R2},${formattedData.N1},${formattedData.N2},${formattedData.N3},${formattedData.N4}</td></tr>`;
    newCategoryRows.innerHTML += `<tr><td>Age 63-72</td><td>${formattedData.Y1},${formattedData.Y2},${formattedData.M1},${formattedData.M2},${formattedData.D1},${formattedData.D2},${formattedData.R1},${formattedData.R2},${formattedData.N1},${formattedData.N2},${formattedData.N3},${formattedData.N4},${formattedData.Y1},${formattedData.Y2}</td></tr>`;

    document.getElementById('newCategoryTable').classList.remove('hidden');

    // Call the lookup function after category values are displayed
    lookupConsecutiveNumbers();

    document.getElementById('consecutiveNumberTable').classList.remove('hidden');

    // Filter age range categories and display results
    filterAgeRangeCategories();
});

function filterAgeRangeCategories() {
    const newCategoryRows = document.getElementById('newCategoryRows');
    const ageRangeFilterRows = document.getElementById('ageRangeFilterRows');
    ageRangeFilterRows.innerHTML = ''; // Clear previous entries

    // Iterate over each row in the new category table
    newCategoryRows.querySelectorAll('tr').forEach(row => {
        const ageRange = row.children[0].innerText;
        let values = row.children[1].innerText.split(',');

        // Filter out 0 and 5
        values = values.filter(value => value !== '0' && value !== '5');

        // Remove consecutive double numbers
        values = values.filter((value, index, self) => {
            return self[index] !== self[index + 1];
        });

        // Display only the last 3 digit numbers
        const filteredValues = values.slice(-3);

        ageRangeFilterRows.innerHTML += `<tr><td>${ageRange}</td><td>${filteredValues.join(',')}</td></tr>`;
    });

    document.getElementById('ageRangeFilterTable').classList.remove('hidden');
}
function lookupConsecutiveNumbers() {
        // Predefined data for consecutive numbers
        const predefinedData = {
            '246': '靠嘴赚钱，业务能力强，适合做服务行业，做销售。',
            '257': '原则性强，固执，个性直率，自由，随和。别人喜欢接近他。人缘不错。',
            '268': '喜欢谈事业，提钱，喜欢攀比，心里比较累。性情温和。',
            '279': '能够用嘴巴吸引贵人和人缘，为人随和，很多比自己小的桃花。',
            '281': '销售高手，容易忙碌，孤独。',
            '292': '喜欢谈谈事业，投资。能说会道。光说不做，可以做军事。314：冲动，欠考虑，缺少安全感。',
            '325': '心直口快，不想后果，说话直。没后路，切忌要三思而后行。',
            '336': '容易冲动，脾气不好，不能赌博，谨慎投资。',

            '103': '婚姻问题数字',
            '301': '婚姻问题数字',
            '3001': '婚姻问题数字',
            '1003': '婚姻问题数字',
            '6008': '婚姻问题数字',
            '8006': '婚姻问题数字',
            '1313': '婚姻问题数字',

            '1803': '情绪压抑的数字',
            '9704': '情绪压抑的数字',
            '8106': '情绪压抑的数字',
            '6308': '情绪压抑的数字',
            '3803': '情绪压抑的数字',
            '4704': '情绪压抑的数字',
            '1601': '情绪压抑的数字',

            '12': '这个号码的主人人生起伏波动大，易大起大落，两极分化。占绝命格局者，思维敏捷，善谋略有才华，但求好心切，正因为求好心切，他们往往会指责他人，会造成朋友容易离去，做事情易冲动、容易出现意外车祸，犯口舌官司牢灾，不会理财，容易轻信别人而被骗，易负债。',
            '21': '这个号码的主人人生起伏波动大，易大起大落，两极分化。占绝命格局者，思维敏捷，善谋略有才华，但求好心切，正因为求好心切，他们往往会指责他人，会造成朋友容易离去，做事情易冲动、容易出现意外车祸，犯口舌官司牢灾，不会理财，容易轻信别人而被骗，易负债。',
            '13': '这个号码的主人属于无心机的那种，心地特别的善良，在生活中如果碰到这样的人，一定要多跟他交往。因为他是你人生当中的贵人，一般自然能吸引到这样数字的人，都是比较有福报的人，在他的人生当中从来不会缺钱。',
            '31': '这个号码的主人属于无心机的那种，心地特别的善良，在生活中如果碰到这样的人，一定要多跟他交往。因为他是你人生当中的贵人，一般自然能吸引到这样数字的人，都是比较有福报的人，在他的人生当中从来不会缺钱。',
            '14': '这个号码在数字能量学中是一个很不错的数字，贵人很多，能得到长辈或者领导人的帮助，如果遇上好机会，就能够赚大钱',
            '41': '这个号码在数字能量学中是一个很不错的数字，贵人很多，能得到长辈或者领导人的帮助，如果遇上好机会，就能够赚大钱',
            '16': '这个号码的主人，人长的比较漂亮，皮肤白皙，心思细腻而敏感，做人做事亲和力比较足，很容易相处。一般都是从事服务行业的比较多，类似公关、美容业、跟美有关的行业，但是花钱比较大方，不守财，情感易出轨。',
            '61': '这个号码的主人，人长的比较漂亮，皮肤白皙，心思细腻而敏感，做人做事亲和力比较足，很容易相处。一般都是从事服务行业的比较多，类似公关、美容业、跟美有关的行业，但是花钱比较大方，不守财，情感易出轨。',

            '17': '这个数字出现在手机号码中时，意味着口才好，说话比较直接，脾气不好，该说的不该说的统统的都说出来，容易因口误而犯口色是非，官司官非，犯小人。',
            '71': '这个数字出现在手机号码中时，意味着口才好，说话比较直接，脾气不好，该说的不该说的统统的都说出来，容易因口误而犯口色是非，官司官非，犯小人。',
            '18': '这个数字其实是一个特别聪明的数字，智商非常高，鬼点子多，做事喜欢独立独行，行踪让人难以捉摸，具有双重的人格，内心脆弱常走极端，是一个很现实的人，戒备心较强，不会轻易的相信他人，但是钱财流失特别快。',
            '81': '这个数字其实是一个特别聪明的数字，智商非常高，鬼点子多，做事喜欢独立独行，行踪让人难以捉摸，具有双重的人格，内心脆弱常走极端，是一个很现实的人，戒备心较强，不会轻易的相信他人，但是钱财流失特别快。',
            '19': '这个数字出现在手机号码中时，具有领导者的能力，相当有自我主张，不轻易被人说服，对事物的判断力极强，对感情是执着，心地善良属于宁缺勿滥的典型，具有悲天悯人的胸怀，处理事情寻求正道，有天生的超强抗压性，有延年数字磁场的人，通常比较长寿，因属于闲不住的，不管是在工作上或是在家里，都是喜欢干活。',
            '91': '这个数字出现在手机号码中时，具有领导者的能力，相当有自我主张，不轻易被人说服，对事物的判断力极强，对感情是执着，心地善良属于宁缺勿滥的典型，具有悲天悯人的胸怀，处理事情寻求正道，有天生的超强抗压性，有延年数字磁场的人，通常比较长寿，因属于闲不住的，不管是在工作上或是在家里，都是喜欢干活。',

        };

        // Get all digits from the IC number
        const icNumber = document.getElementById('icNumber').value;
        const takeNoteRows = document.getElementById('takeNoteRows');
        takeNoteRows.innerHTML = ''; // Clear previous entries

        // Check for consecutive numbers
        for (let i = 0; i < icNumber.length - 1; i++) {
            for (let j = i + 2; j <= icNumber.length; j++) {
                const consecutiveNumber = icNumber.substring(i, j);
                if (predefinedData[consecutiveNumber]) {
                    takeNoteRows.innerHTML += `<tr><td>${consecutiveNumber}</td><td>${predefinedData[consecutiveNumber]}</td></tr>`;
                }
            }
        }

        document.getElementById('takeNoteTable').classList.remove('hidden');
    }

    </script>
</body>

</html>