// Example question data for each topic
const topicQuestionsII = {
    lifeDescription: [
        "紫薇",
        "天府",
        "紫+府",
        "七杀",
        "紫+杀",
        "贪狼",
        "紫+贪",
        "天相",
        "紫+相",
        "破军",
        "紫+破",
        "廉贞",
        "廉+贪",
        "廉+杀",
        "廉+相",
        "廉+破",
        "廉+府",
        "天机",
        "天梁",
        "机+梁",
        "机+阴",
        "天同",
        "太阴",
        "同+阴",
        "巨门",
        "同+巨",
        "机+巨",
        "太阳",
        "阳+阴",
        "阳+梁",
        "武曲",
        "武+杀",
        "武+破",
        "武+贪",
        "武+相",
        "武+府",
        "天空",
        "地劫",
        "擎羊",
        "铃星",
        "火星",
        "陀罗",
        "天刑",
        "天魁",
        "天钺",
        "文昌",
        "文曲",
        "左辅",
        "右弼",
        "红鸾",
        "天喜",
        "禄存",
        "天姚",
        "天马",
        "化禄",
        "化权",
        "化科",
        "化忌",
        "阴煞"
    ],
    wealthDescription: [
        "紫薇",
        "天府",
        "紫+府",
        "七杀",
        "紫+杀",
        "贪狼",
        "紫+贪",
        "天相",
        "紫+相",
        "破军",
        "紫+破",
        "廉贞",
        "廉+贪",
        "廉+杀",
        "廉+相",
        "廉+破",
        "廉+府",
        "天机",
        "天梁",
        "机+梁",
        "机+阴",
        "天同",
        "太阴",
        "同+阴",
        "巨门",
        "同+巨",
        "机+巨",
        "太阳",
        "阳+阴",
        "阳+梁",
        "武曲",
        "武+杀",
        "武+破",
        "武+贪",
        "武+相",
        "武+府",
        "天空",
        "地劫",
        "擎羊",
        "铃星",
        "火星",
        "陀罗",
        "天刑",
        "天魁",
        "天钺",
        "文昌",
        "文曲",
        "左辅",
        "右弼",
        "红鸾",
        "天喜",
        "禄存",
        "天姚",
        "天马",
        "化禄",
        "化权",
        "化科",
        "化忌",
        "阴煞"
    ],
   
    professionalDescription: [
        "紫薇",
        "天府",
        "紫+府",
        "七杀",
        "紫+杀",
        "贪狼",
        "紫+贪",
        "天相",
        "紫+相",
        "破军",
        "紫+破",
        "廉贞",
        "廉+贪",
        "廉+杀",
        "廉+相",
        "廉+破",
        "廉+府",
        "天机",
        "天梁",
        "机+梁",
        "机+阴",
        "天同",
        "太阴",
        "同+阴",
        "巨门",
        "同+巨",
        "机+巨",
        "太阳",
        "阳+阴",
        "阳+梁",
        "武曲",
        "武+杀",
        "武+破",
        "武+贪",
        "武+相",
        "武+府",
        "天空",
        "地劫",
        "擎羊",
        "铃星",
        "火星",
        "陀罗",
        "天刑",
        "天魁",
        "天钺",
        "文昌",
        "文曲",
        "左辅",
        "右弼",
        "红鸾",
        "天喜",
        "禄存",
        "天姚",
        "天马",
        "化禄",
        "化权",
        "化科",
        "化忌",
        "阴煞"
    ],
    travelDescription: [
        "紫薇",
        "天府",
        "紫+府",
        "七杀",
        "紫+杀",
        "贪狼",
        "紫+贪",
        "天相",
        "紫+相",
        "破军",
        "紫+破",
        "廉贞",
        "廉+贪",
        "廉+杀",
        "廉+相",
        "廉+破",
        "廉+府",
        "天机",
        "天梁",
        "机+梁",
        "机+阴",
        "天同",
        "太阴",
        "同+阴",
        "巨门",
        "同+巨",
        "机+巨",
        "太阳",
        "阳+阴",
        "阳+梁",
        "武曲",
        "武+杀",
        "武+破",
        "武+贪",
        "武+相",
        "武+府",
        "天空",
        "地劫",
        "擎羊",
        "铃星",
        "火星",
        "陀罗",
        "天刑",
        "天魁",
        "天钺",
        "文昌",
        "文曲",
        "左辅",
        "右弼",
        "红鸾",
        "天喜",
        "禄存",
        "天姚",
        "天马",
        "化禄",
        "化权",
        "化科",
        "化忌",
        "阴煞"
    ],
};

// Example answers for each question tied to the selected topic
const answersII = {
    lifeDescription: {
        "紫薇": "领导能力爆发的运势，创意",
        "天府": "有进财的机会",
        "紫+府": "格局大，有贵人相助，可创业，容易获得结果",
        "七杀": "健康走劫，冲刺，耗力，容易得罪人，感性破格",
        "紫+杀": "能获得控制大全，一直想要被证明他的权力，一直想要突破的去冒险",
        "贪狼": "多创意，有桃花，应酬多",
        "紫+贪": "桃花过剩，桃花犯主，因色而祸，应酬多，人脉广",
        "天相": "侠义，打抱不平，变化多端，翻脸像翻书",
        "紫+相": "格局大，心想事成，经济来源很好",
        "破军": "创意者，负面情绪会带来耗力，好强，先锋队，以争奋破坏为目的，脾气大",
        "紫+破": "反复的不顺利，会打破砂锅问到底，坚持己见",
        "廉贞": "领导能力，负面情绪会带来想法不对，桃花",
        "廉+贪": "好运程，主桃花为贵",
        "廉+杀": "自立自强，自负之人，脾气大",
        "廉+相": "爱约束，人际关系不好，惹官非",
        "廉+破": "控制人，非常有忍耐力，脾气暴",
        "廉+府": "有计划但是很固执",
        "天机": "待人亲切，神经过敏，理想太高，幻想太多",
        "天梁": "军师，要名望，解厄之力",
        "机+梁": "很有力量，格局大，灵敏",
        "机+阴": "花心，劈腿，异性缘好",
        "天同": "福星高照。福星照耀，难的事都能化解",
        "太阴": "进财能力，要求完美，合群，喜欢研究",
        "同+阴": "人缘佳，处事能力强，异性缘好，惹感情纠纷",
        "巨门": "以口为财，小心说话避免口角",
        "同+巨": "福星高照，说话更有力量",
        "机+巨": "博学，运势不错",
        "太阳": "活跃，照亮人家",
        "阳+阴": "大问题，灾难",
        "阳+梁": "想要换工，找新的职业，耗力",
        "武曲": "财星进入，做事果断，心直口快，容易得罪人",
        "武+杀": "家里会有纠纷，一意孤行",
        "武+破": "控制欲强，挥霍，违法行为",
        "武+贪": "有赚钱能力，桃花，性欲强旺",
        "武+相": "金钱纠纷，周转不灵",
        "武+府": "大格局，做事踏实",
        "天空": "爱想像，好言相劝不听，忽悠之话全都信",
        "地劫": "爱想像，好言相劝不听，忽悠之话全都信",
        "擎羊": "有意外车祸的迹象",
        "铃星": "能吃苦，比较能系统化",
        "火星": "火爆，爱面子，急性格的人",
        "陀罗": "想太多，没动力，选择性障碍",
        "天刑": "宜男不宜女，利武不利文，官费之星，六亲疏远",
        "天魁": "男贵人相助",
        "天钺": "女贵人相助",
        "文昌": "人缘好。讲逻辑，原则",
        "文曲": "人缘好。讲逻辑，原则",
        "左辅": "男贵人相助",
        "右弼": "女贵人相助",
        "红鸾": "身体健康，婚姻美满的一年",
        "天喜": "桃花，一喜破三杀",
        "禄存": "解厄的功能",
        "天姚": "贵人相助",
        "天马": "活跃，好动",
        "化禄": "好事，好机遇",
        "化权": "有权威",
        "化科": "有名誉",
        "化忌": "有灾难",
        "阴煞": "要提妨小人破坏"
    },
    wealthDescription: {
        "紫薇": "执行力强有财进",
        "天府": "回会更多的财",
        "紫+府": "格局大，执行力超强得到更多的财富",
        "七杀": "浪费钱，挥霍",
        "紫+杀": "没那么挥霍",
        "贪狼": "赚钱的欲望大",
        "紫+贪": "事情容易完成",
        "天相": "用钱比较谨慎小心",
        "紫+相": "格局大，不乱挥霍",
        "破军": "进财能力有所耗损，进财有阻碍。浪费钱",
        "紫+破": "进财能力有所耗损，进财有阻碍。浪费钱",
        "廉贞": "守财能力强",
        "廉+贪": "赚钱容易但会有酒色之气",
        "廉+杀": "浪费钱，亏损",
        "廉+相": "守财也会进财",
        "廉+破": "消耗，大浪费",
        "廉+府": "守财能力强",
        "天机": "多变化，财来财去",
        "天梁": "格局大，工作勤奋",
        "机+梁": "有贪念。有意外收获，财富增加",
        "机+阴": "增加财富，懂得运用钱财",
        "天同": "赚钱的大机会，有意外的好运",
        "太阴": "进财，主富贵",
        "同+阴": "赚钱的大机会",
        "巨门": "开口为财",
        "同+巨": "保守，储蓄观念，有暗财",
        "机+巨": "资金流动大，挥霍",
        "太阳": "争取身誉，进修学习",
        "阳+阴": "财运不济，不能守财，劳心费力",
        "阳+梁": "人没有贪念，有意外收获",
        "武曲": "财缘丰足，得财顺利",
        "武+杀": "善于理财，投机的冒险",
        "武+破": "应酬多，开销大，没有投资运",
        "武+贪": "能创业，懂得生财之道，有偏财运",
        "武+相": "大格局善于理财，财运比较好，稳赚不赔",
        "武+府": "大格局，理财好，可创业",
        "天空": "破财，无法累计财富",
        "地劫": "成败不定，谨慎投资",
        "擎羊": "被人偏财倾家荡产的可能",
        "铃星": "破财，伤财，提高警惕",
        "火星": "意外之财，赚快钱的机会",
        "陀罗": "资金被套",
        "天刑": "生意失败，财运不顺",
        "天魁": "贵人相助，有人解救度过难关",
        "天钺": "贵人相助，有人解救度过难关",
        "文昌": "艺术之财",
        "文曲": "艺术之财",
        "左辅": "源源不绝之财，多方面的财",
        "右弼": "源源不绝之财，多方面的财",
        "红鸾": "异性之财，遇凶星劫财",
        "天喜": "吉祥征兆，喜悦和好运",
        "禄存": "财库变大",
        "天姚": "酒色赌博破财",
        "天马": "奔波劳碌得财",
        "化禄": "好财运",
        "化权": "掌财有方，理财有福",
        "化科": "容易得到贵人相助，有偏财运",
        "化忌": "破顺，漏财，财来财去一场空",
        "阴煞": "要提妨小人劫财，让你亏损"
    },
    professionalDescription: {
        "紫薇": "格局大，表现出色",
        "天府": "善于应酬，保守有理想，很敬业",
        "紫+府": "格局大，善于应酬，异性缘重",
        "七杀": "想创业，有冒险精神，不怕苦，固执勇敢",
        "紫+杀": "白手起家，独立，领导能力强，不管他人",
        "贪狼": "工作卖力，擅长交际应酬",
        "紫+贪": "投机取巧，势力大",
        "天相": "事业安定，二把手",
        "紫+相": "格局大，喜欢开创，有贵人助力",
        "破军": "动荡变化大，多副业，事业运不佳",
        "紫+破": "事业变动大，一生多成多败，一波三折",
        "廉贞": "事业多波折，经商破败",
        "廉+贪": "多应酬，投资的运，从商做老板",
        "廉+杀": "有好的事业，掌握机会",
        "廉+相": "一波三折，起跌无常，有领导力",
        "廉+破": "劳心劳力，事业必有挫折",
        "廉+府": "大富大贵，文武双全，有偏财运",
        "天机": "能掌握事业运",
        "天梁": "掌握事业运，有贵气，能成就，善于处理难题",
        "机+梁": "有较高的地位和权力",
        "机+阴": "是非多，投机必败，不易与女性合伙，随遇而安反而可获良好机遇",
        "天同": "有贵气，能守祖业",
        "太阴": "事业平稳",
        "同+阴": "可以到外地发展",
        "巨门": "工作态度认真，肯吃苦耐劳，容易和人起纠纷",
        "同+巨": "有独特的思想但是工作环境很复杂",
        "机+巨": "事业多变动，因事业耗力大",
        "太阳": "有领导的地位，掌权的机运",
        "阳+阴": "吉就名利双收，凶就虚名虚利，有权威",
        "阳+梁": "矛盾冲突，能得到贵人的相助",
        "武曲": "工作不稳定，开发事业力强，找对的伙伴一起发展",
        "武+杀": "有权贵，有执行力，事业起伏多",
        "武+破": "善于适应环境，白手起家，性质刚硬，有冒险精神",
        "武+贪": "能创业，懂得生财之道，有偏财运",
        "武+相": "离乡为贵，远离他方获得事业发展，学习艺术和技术的东西",
        "武+府": "可掌大权，高官职，财源广进，但是一生不能投机",
        "天空": "不可经商",
        "地劫": "事业破坏力，波动大",
        "擎羊": "波动，徒劳无功有竞争对手",
        "铃星": "容易招惹小人，不断想追求成功",
        "火星": "收获不成正比，多劳少成",
        "陀罗": "事业繁忙，事业多挫折，常惹麻烦，与上司对立",
        "天刑": "敢于承担责任，决策力强，易惹是非官费",
        "天魁": "事业运势好",
        "天钺": "事业运势好",
        "文昌": "事业需要规范经营",
        "文曲": "事业需要规范经营",
        "左辅": "管理能力佳，有魄力",
        "右弼": "管理能力佳，有魄力",
        "红鸾": "金榜题名",
        "天喜": "在职业有幸运和好运的贵人",
        "禄存": "财务比较不错",
        "天姚": "有机会遇到配偶或外援",
        "天马": "一生事业调动比较大",
        "化禄": "不能专一，多变化，比较会得罪人",
        "化权": "事业心强，有创业能力，受人提拔",
        "化科": "工作上顺利平稳，资金流顺畅",
        "化忌": "事业工作不稳定，经常换工，易惹小人",
        "阴煞": "提放小人出卖，捣乱你的商业机会"
    },
    travelDescription: {
        "紫薇": "要他离乡背井适应新环境",
        "天府": "出门遇贵人，出门经商会顺利",
        "紫+府": "格局大，很有贵气，贵人相助",
        "七杀": "夫妻亲密关系受影响，影响人际关系",
        "紫+杀": "出外受人敬畏，人缘好，建立事工",
        "贪狼": "喜欢风花雪月。有空难风险",
        "紫+贪": "酒色应酬而忙碌，交际应酬之财，多风流事",
        "天相": "格局大，出外吉祥，在外受人尊敬，易建立事业",
        "紫+相": "格局大，出外有小人（碰煞星）",
        "破军": "不能安守在家，四处奔波劳碌",
        "紫破": "出外有贵人相助，人缘佳，受人欢迎",
        "廉贞": "适宜离开出生地往外发展，多应酬，费心劳神，生活艰难（如遇煞星）",
        "廉+贪": "做事表里不一，活跃不起来",
        "廉+杀": "小心远行，有客死他乡的几率",
        "廉+相": "有利外出发展，出差越活跃约有好事",
        "廉+破": "出外人际关系有问题",
        "廉+府": "出外保守谨慎，不善于理财",
        "天机": "在外地能赚到机遇，计划周详，得到贵人帮助",
        "天梁": "主外出游有灾祸，招小人阴谋陷害",
        "机+梁": "变化多端，可外出发展机遇",
        "机+阴": "在外女人缘多，得女性助力",
        "天同": "外出得福，多口福，出外有长辈帮助",
        "太阴": "在外人缘广，遇到地位高的贵人",
        "同+阴": "有利外地发展，能白手起家",
        "巨门": "口舌求财，出外远程不佳，劳心劳力不安定",
        "同+巨": "自己的财库变大，人际关系好",
        "机+巨": "心灵不安，不确定，多猜疑",
        "太阳": "出外受人尊敬，出外有官费，孤独（如果太阳落陷）",
        "阳+阴": "无根基，奔波到老，阻力大",
        "阳+梁": "活动力很强，在外人际关系好，有人缘",
        "武曲": "离乡发展为佳，有贵人扶持，不怕牺牲",
        "武+杀": "出外耗力，遭人陷害",
        "武+破": "心神不宁，波动大，遇小人欺骗",
        "武+贪": "外出助力，精打细算",
        "武+相": "奔波忙碌，出外会遇到灾难",
        "武+府": "不可以离开出生地，注意交通意外",
        "天空": "被拖累，嫁祸，在外挫折多，难遇贵人",
        "地劫": "出外工作不理想，花钱大手脚，惹官司",
        "擎羊": "脾气过于急躁，人际关系不好，会有血光之灾",
        "铃星": "影响夫妻关系，人际关系也不好，工作会受影响",
        "火星": "事业升迁会有多挫折，运数不佳",
        "陀罗": "意志坚定，敢闯敢拼，不断进取",
        "天刑": "工作环境，居住环境的变化",
        "天魁": "事业层面有出色，发展有趋势，有贵人相助提拔",
        "天钺": "事业层面有出色，发展有趋势，有贵人相助提拔",
        "文昌": "会有出国学习的机会",
        "文曲": "会遇到职场上的贵人",
        "左辅": "出国运不错",
        "右弼": "出国运不错",
        "红鸾": "男娶美妻，女嫁贤父",
        "天喜": "有吉祥得征兆",
        "禄存": "在外界事物上有收获，名声财气高",
        "天姚": "积极向上，心态和进取心，渴望在事业上取得成功",
        "天马": "事业变动大，工作调动",
        "化禄": "有贵人相助，不分贵贱，在外发展顺利",
        "化权": "擅长处理谋官的事务",
        "化科": "人际关系发展很好，遇到较高有智慧和才华的人",
        "化忌": "运势产生一定的影响，有阻碍，做事不顺，沟通不好",
        "阴煞": "提放小人陷害，设计陷进让你入局被骗"
    },
};

function initializeApp(newappId) {
    const topicSelectNew = document.getElementById(`topicSelectNew${newappId}`);
    const numColumnsNewInput = document.getElementById(`numColumnsNew${newappId}`);
    const questionAreaNew = document.getElementById(`questionAreaNew${newappId}`);

    // Enable number of questions dropdown only after a topic is selected
    topicSelectNew.addEventListener('change', function() {
        questionAreaNew.innerHTML = '';  // Clear any existing questions and answers
        numColumnsNewInput.value = '';   // Reset number of questions selection
        numColumnsNewInput.disabled = false;
    });

    // Auto-submit when the number of questions is selected
    numColumnsNewInput.addEventListener('change', function() {
        questionAreaNew.innerHTML = '';  // Clear previous questions and answers
        const selectedTopic = topicSelectNew.value;
        const numColumnsNew = parseInt(numColumnsNewInput.value);

        if (!selectedTopic || isNaN(numColumnsNew) || numColumnsNew < 1 || numColumnsNew > 6) {
            alert('Please select a valid number of questions from 1 to 6.');
            return;
        }

        const selectedQuestions = topicQuestionsII[selectedTopic];
        const questionBlocks = [];

        for (let i = 0; i < numColumnsNew; i++) {
            const questionBlockNew = document.createElement('div');
            questionBlockNew.className = 'col-md-12 question-block flexion';

            const questionSelectNew = document.createElement('select');
            questionSelectNew.className = 'form-select mb-2 w-100px';
            questionSelectNew.innerHTML = '<option selected disabled>选择..</option>';

            selectedQuestions.forEach(question => {
                const option = document.createElement('option');
                option.value = question;
                option.textContent = question;
                questionSelectNew.appendChild(option);
            });

            const answerIIDiv = document.createElement('div');
            answerIIDiv.className = 'answer';

            // Display answer based on the topic and question
            questionSelectNew.addEventListener('change', function() {
                const selectedQuestionNew = questionSelectNew.value;
                const newAnswer = answersII[selectedTopic][selectedQuestionNew] || 'Answer not available.';
                
                // Clear any existing answers and display the selected answer
                answerIIDiv.innerHTML = `<p>${newAnswer}</p>`;
            });

            questionBlockNew.appendChild(questionSelectNew);
            questionBlockNew.appendChild(answerIIDiv);
            questionBlocks.push(questionBlockNew);
        }

        questionBlocks.forEach(block => questionAreaNew.appendChild(block));
        updateAvailableQuestionsNew();
    });
}

function updateAvailableQuestionsNew() {
    // Collect selected questions from all 12 sets
    const selectedQuestionsNew = [];
    for (let i = 1; i <= 12; i++) {
        const selectedQuestionsInSet = Array.from(document.querySelectorAll(`#questionAreaNew${i} select`))
            .map(select => select.value)
            .filter(value => value);  // Filter out empty values
        selectedQuestionsNew.push(...selectedQuestionsInSet);
    }

    // Disable selected questions across all question areas
    for (let i = 1; i <= 12; i++) {
        const questionSelectsNew = document.querySelectorAll(`#questionAreaNew${i} select`);
        questionSelectsNew.forEach(select => {
            Array.from(select.options).forEach(option => {
                if (selectedQuestionsNew.includes(option.value)) {
                    option.disabled = false;
                    option.style.color = '#dedede';  // Grey out disabled options
                } else {
                    option.disabled = false;
                    option.style.color = '#2f663b';  // Dark green text for available options
                }
            });
        });
    }

}


// Initialize both apps
initializeApp(1);
initializeApp(2);
initializeApp(3);
initializeApp(4);

// Add event listeners to update available questions when any question area changes
for (let i = 1; i <= 12; i++) {
    document.querySelector(`#questionAreaNew${i}`).addEventListener('change', updateAvailableQuestionsNew);
}